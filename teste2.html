<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendário com Eventos</title>
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    #calendar {
      max-width: 900px;
      margin: 40px auto;
    }
    #eventForm, #editForm {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
    }
    input, button {
      margin: 5px;
    }
    #editForm {
      display: none; /* O formulário de edição estará oculto inicialmente */
    }
  </style>
</head>
<body>

  <h1 style="text-align: center;">Calendário de Eventos</h1>
  
  <div id="eventForm">
    <input type="text" id="eventTitle" placeholder="Título do Evento" />
    <input type="date" id="eventDate" />
    <button onclick="addEvent()">Adicionar Evento</button>
  </div>

  <div id="editForm">
    <input type="text" id="editTitle" placeholder="Novo Título" />
    <input type="date" id="editDate" />
    <button onclick="updateEvent()">Atualizar Evento</button>
    <button onclick="cancelEdit()">Cancelar</button>
  </div>

  <div id="calendar"></div>

  <script>
    let selectedEvent = null;  // Variável para armazenar o evento selecionado para edição

    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        editable: true,
        selectable: true,
        events: [],
        eventClick: function(info) {
          // Mostrar os detalhes do evento no formulário de edição
          selectedEvent = info.event;
          document.getElementById('editTitle').value = info.event.title;
          document.getElementById('editDate').value = info.event.start.toISOString().split('T')[0];
          document.getElementById('editForm').style.display = 'flex';
          document.getElementById('eventForm').style.display = 'none';
        }
      });

      calendar.render();

      // Função para adicionar eventos
      window.addEvent = function() {
        var title = document.getElementById('eventTitle').value;
        var date = document.getElementById('eventDate').value;

        if (title && date) {
          calendar.addEvent({
            title: title,
            start: date,
            allDay: true
          });
          document.getElementById('eventTitle').value = '';
          document.getElementById('eventDate').value = '';
        } else {
          alert('Por favor, insira o título e a data do evento.');
        }
      }

      // Função para atualizar o evento selecionado
      window.updateEvent = function() {
        var newTitle = document.getElementById('editTitle').value;
        var newDate = document.getElementById('editDate').value;

        if (newTitle && newDate) {
          // Garantindo que o evento seja de apenas um dia
          selectedEvent.setProp('title', newTitle);
          selectedEvent.setStart(newDate);
          selectedEvent.setEnd(null);  // Remove o fim para garantir que seja um evento de um dia
          cancelEdit();
        } else {
          alert('Por favor, insira o novo título e a nova data.');
        }
      }

      // Função para cancelar a edição
      window.cancelEdit = function() {
        document.getElementById('editForm').style.display = 'none';
        document.getElementById('eventForm').style.display = 'flex';
      }
    });
  </script>

</body>
</html>
